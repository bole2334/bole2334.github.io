import{t as G,a as Z}from"./index.DcwNpzyR.js";import{r as N,a5 as P,a6 as Q,a7 as R}from"./scheduler.A3ZoaCbk.js";import{w as x,r as ee}from"./index.iJzYbLjp.js";function de(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function te(e,t){Z(e,1,1,()=>{t.delete(e.key)})}function fe(e,t){e.f(),te(e,t)}function pe(e,t,s,l,f,o,n,d,a,w,v,$){let u=e.length,y=o.length,m=u;const b={};for(;m--;)b[e[m].key]=m;const i=[],S=new Map,T=new Map,M=[];for(m=y;m--;){const c=$(f,o,m),h=s(c);let r=n.get(h);r?l&&M.push(()=>r.p(c,t)):(r=w(h,c),r.c()),S.set(h,i[m]=r),h in b&&T.set(h,Math.abs(m-b[h]))}const L=new Set,E=new Set;function k(c){G(c,1),c.m(d,v),n.set(c.key,c),v=c.first,y--}for(;u&&y;){const c=i[y-1],h=e[u-1],r=c.key,p=h.key;c===h?(v=c.first,u--,y--):S.has(p)?!n.has(r)||L.has(r)?k(c):E.has(p)?u--:T.get(r)>T.get(p)?(E.add(r),k(c)):(L.add(p),u--):(a(h,n),u--)}for(;u--;){const c=e[u];S.has(c.key)||a(c,n)}for(;y;)k(i[y-1]);return N(M),i}function we(e,t){const s={},l={},f={$$scope:1};let o=e.length;for(;o--;){const n=e[o],d=t[o];if(d){for(const a in n)a in d||(l[a]=1);for(const a in d)f[a]||(s[a]=d[a],f[a]=1);e[o]=d}else for(const a in n)f[a]=1}for(const n in l)n in s||(s[n]=void 0);return s}function me(e){return typeof e=="object"&&e!==null?e:{}}const ne=x(void 0);function he(e,t){const{computePosition:s,autoUpdate:l,offset:f,shift:o,flip:n,arrow:d,size:a,autoPlacement:w,hide:v,inline:$}=P(ne),u={open:!1,autoUpdateCleanup:()=>{}},y=':is(a[href], button, input, textarea, select, details, [tabindex]):not([tabindex="-1"])';let m;const b="https://www.skeleton.dev/utilities/popups";let i,S;function T(){i=document.querySelector(`[data-popup="${t.target}"]`)??document.createElement("div"),S=i.querySelector(".arrow")??document.createElement("div")}T();function M(){var p,g,_,U,z,D,C,F;if(!i)throw new Error(`The data-popup="${t.target}" element was not found. ${b}`);if(!s)throw new Error(`Floating UI 'computePosition' not found for data-popup="${t.target}". ${b}`);if(!f)throw new Error(`Floating UI 'offset' not found for data-popup="${t.target}". ${b}`);if(!o)throw new Error(`Floating UI 'shift' not found for data-popup="${t.target}". ${b}`);if(!n)throw new Error(`Floating UI 'flip' not found for data-popup="${t.target}". ${b}`);if(!d)throw new Error(`Floating UI 'arrow' not found for data-popup="${t.target}". ${b}`);const r=[];a&&r.push(a((p=t.middleware)==null?void 0:p.size)),w&&r.push(w((g=t.middleware)==null?void 0:g.autoPlacement)),v&&r.push(v((_=t.middleware)==null?void 0:_.hide)),$&&r.push($((U=t.middleware)==null?void 0:U.inline)),s(e,i,{placement:t.placement??"bottom",middleware:[f(((z=t.middleware)==null?void 0:z.offset)??8),o(((D=t.middleware)==null?void 0:D.shift)??{padding:8}),n((C=t.middleware)==null?void 0:C.flip),d(((F=t.middleware)==null?void 0:F.arrow)??{element:S||null}),...r]}).then(({x:W,y:H,placement:J,middlewareData:X})=>{if(Object.assign(i.style,{left:`${W}px`,top:`${H}px`}),S){const{x:O,y:q}=X.arrow,B={top:"bottom",right:"left",bottom:"top",left:"right"}[J.split("-")[0]];Object.assign(S.style,{left:O!=null?`${O}px`:"",top:q!=null?`${q}px`:"",right:"",bottom:"",[B]:"-4px"})}})}function L(){i&&(u.open=!0,t.state&&t.state({state:u.open}),M(),i.style.display="block",i.style.opacity="1",i.style.pointerEvents="auto",i.removeAttribute("inert"),u.autoUpdateCleanup=l(e,i,M),m=Array.from(i==null?void 0:i.querySelectorAll(y)))}function E(r){if(!i)return;const p=parseFloat(window.getComputedStyle(i).transitionDuration.replace("s",""))*1e3;setTimeout(()=>{u.open=!1,t.state&&t.state({state:u.open}),i.style.opacity="0",i.setAttribute("inert",""),u.autoUpdateCleanup&&u.autoUpdateCleanup(),r&&r()},p)}function k(){u.open===!1?L():E()}function c(r){if(u.open===!1||e.contains(r.target))return;if(i&&i.contains(r.target)===!1){E();return}const p=t.closeQuery===void 0?"a[href], button":t.closeQuery;if(p==="")return;const g=i==null?void 0:i.querySelectorAll(p);g==null||g.forEach(_=>{_.contains(r.target)&&E()})}const h=r=>{if(u.open===!1)return;const p=r.key;if(p==="Escape"){r.preventDefault(),e.focus(),E();return}m=Array.from(i==null?void 0:i.querySelectorAll(y)),u.open&&document.activeElement===e&&(p==="ArrowDown"||p==="Tab")&&y.length>0&&m.length>0&&(r.preventDefault(),m[0].focus())};switch(t.event){case"click":e.addEventListener("click",k,!0),window.addEventListener("click",c,!0);break;case"hover":e.addEventListener("mouseover",L,!0),e.addEventListener("mouseleave",()=>E(),!0);break;case"focus-blur":e.addEventListener("focus",k,!0),e.addEventListener("blur",()=>E(),!0);break;case"focus-click":e.addEventListener("focus",L,!0),window.addEventListener("click",c,!0);break;default:throw new Error(`Event value of '${t.event}' is not supported. ${b}`)}return window.addEventListener("keydown",h,!0),M(),{update(r){E(()=>{t=r,M(),T()})},destroy(){e.removeEventListener("click",k,!0),e.removeEventListener("mouseover",L,!0),e.removeEventListener("mouseleave",()=>E(),!0),e.removeEventListener("focus",k,!0),e.removeEventListener("focus",L,!0),e.removeEventListener("blur",()=>E(),!0),window.removeEventListener("click",c,!0),window.removeEventListener("keydown",h,!0)}}}const K="modalStore";function ve(){const e=Q(K);if(!e)throw new Error("modalStore is not initialized. Please ensure that `initializeStores()` is invoked in the root layout file of this app!");return e}function Ee(){const e=oe();return R(K,e)}function oe(){const{subscribe:e,set:t,update:s}=x([]);return{subscribe:e,set:t,update:s,trigger:l=>s(f=>(f.push(l),f)),close:()=>s(l=>(l.length>0&&l.shift(),l)),clear:()=>t([])}}const ie={message:"Missing Toast Message",autohide:!0,timeout:5e3},Y="toastStore";function ye(){const e=Q(Y);if(!e)throw new Error("toastStore is not initialized. Please ensure that `initializeStores()` is invoked in the root layout file of this app!");return e}function be(){const e=se();return R(Y,e)}function re(){const e=Math.random();return Number(e).toString(32)}function se(){const{subscribe:e,set:t,update:s}=x([]),l=o=>s(n=>{if(n.length>0){const d=n.findIndex(w=>w.id===o),a=n[d];a&&(a.callback&&a.callback({id:o,status:"closed"}),a.timeoutId&&clearTimeout(a.timeoutId),n.splice(d,1))}return n});function f(o){if(o.autohide===!0)return setTimeout(()=>{l(o.id)},o.timeout)}return{subscribe:e,close:l,trigger:o=>{const n=re();return s(d=>{o&&o.callback&&o.callback({id:n,status:"queued"}),o.hideDismiss&&(o.autohide=!0);const a={...ie,...o,id:n};return a.timeoutId=f(a),d.push(a),d}),n},freeze:o=>s(n=>(n.length>0&&clearTimeout(n[o].timeoutId),n)),unfreeze:o=>s(n=>(n.length>0&&(n[o].timeoutId=f(n[o])),n)),clear:()=>t([])}}const A={};function j(e){return e==="local"?localStorage:sessionStorage}function I(e,t,s){const l=(s==null?void 0:s.serializer)??JSON,f=(s==null?void 0:s.storage)??"local";function o(n,d){j(f).setItem(n,l.stringify(d))}if(!A[e]){const n=x(t,w=>{const v=j(f).getItem(e);v&&w(l.parse(v));{const $=u=>{u.key===e&&w(u.newValue?l.parse(u.newValue):null)};return window.addEventListener("storage",$),()=>window.removeEventListener("storage",$)}}),{subscribe:d,set:a}=n;A[e]={set(w){o(e,w),a(w)},update(w){const v=w(P(n));o(e,v),a(v)},subscribe:d}}return A[e]}I("modeOsPrefers",!1);I("modeUserPrefers",void 0);I("modeCurrent",!1);const V="(prefers-reduced-motion: reduce)";function ae(){return window.matchMedia(V).matches}const Se=ee(ae(),e=>{{const t=l=>{e(l.matches)},s=window.matchMedia(V);return s.addEventListener("change",t),()=>{s.removeEventListener("change",t)}}});export{ve as a,ye as b,be as c,Se as d,de as e,me as f,we as g,fe as h,Ee as i,he as p,ne as s,pe as u};
